<!DOCTYPE html>
<html>
<head>
  <title>Eastern Europe Resort Towns</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js"></script>
  <style>
    #map {
      height: 500px;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    // Create Leaflet map
    const map = L.map('map').setView([42.6507, 18.0944], 8); // Set initial map view to a resort town

    // Add tile layer to the map
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    // Load resortTowns data from resorts.json file
    fetch('resorts.json')
      .then(response => response.json())
      .then(resortTowns => {
        // Loop through the resort towns data and add markers to the map
        resortTowns.resortTowns.forEach(resortTown => {
          const marker = L.marker([resortTown.latitude, resortTown.longitude])
            .bindPopup(`<b>${resortTown.name}</b><br>
                        Avg Beer Price: ${resortTown.avgBeerPriceEUR} EUR<br>
                        Median Salary: ${resortTown.medianSalaryEUR} EUR<br>
                        Flight Time from Edinburgh: ${resortTown.flightTimeEdinburghHours} hours<br>
                        Transfer Info: ${resortTown.transferInfo}`)
            .addTo(map);
        });
      })
      .catch(error => console.error('Error loading resortTowns data:', error));
  </script>

<h1>Resorts Table</h1>
  <table id="resortsTable">
    <tr>
      <th>Name</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Avg Beer Price (EUR)</th>
      <th>Median Salary (EUR)</th>
      <th>Flight Time from Edinburgh (hours)</th>
      <th>Transfer Info</th>
    </tr>
  </table>

  <script>
    fetch('resorts.json')
      .then(response => response.json())
      .then(data => {
        const resortsTable = document.getElementById('resortsTable');
        const resorts = data.resortTowns;

        resorts.forEach(resort => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${resort.name}</td>
            <td>${resort.latitude}</td>
            <td>${resort.longitude}</td>
            <td>${resort.avgBeerPriceEUR}</td>
            <td>${resort.medianSalaryEUR}</td>
            <td>${resort.flightTimeEdinburghHours}</td>
            <td>${resort.transferInfo}</td>
          `;
          resortsTable.appendChild(row);
        });
      })
      .catch(error => console.error(error));
  </script>


</body>
</html>
